@if (task(); as task) {
  <button mat-icon-button [matMenuTriggerFor]="menu" data-e2e="button-task-actions__trigger">
    <mat-icon>more_vert</mat-icon>
  </button>
  <mat-menu #menu="matMenu">
    <ng-template matMenuContent>
      <button mat-menu-item [mat-menu-trigger-for]="statuses" data-e2e="button-task-actions__trigger-state">
        <mat-icon>{{ task.state | taskStateIcon }}</mat-icon>
        State: {{ task.state | taskState }}
      </button>
      <button mat-menu-item type="button" (click)="renameTask()" data-e2e="button-task-actions__button-rename">
        Rename
      </button>
      <button mat-menu-item type="button" (click)="deleteTask()" data-e2e="button-task-actions__button-delete">
        Delete
      </button>
    </ng-template>
  </mat-menu>
  <mat-menu #statuses="matMenu">
    <button
      mat-menu-item
      type="button"
      (click)="changeTaskState(taskState.active)"
      data-e2e="button-task-actions__state-option-active"
    >
      <mat-icon>{{ taskState.active | taskStateIcon }}</mat-icon
      >Change to active
    </button>
    <button
      mat-menu-item
      type="button"
      (click)="changeTaskState(taskState.finished)"
      data-e2e="button-task-actions__state-option-finished"
    >
      <mat-icon>{{ taskState.finished | taskStateIcon }}</mat-icon
      >Change to finished
    </button>
    <button
      mat-menu-item
      type="button"
      (click)="changeTaskState(taskState.dropped)"
      data-e2e="button-task-actions__state-option-dropped"
    >
      <mat-icon>{{ taskState.dropped | taskStateIcon }}</mat-icon
      >Change to dropped
    </button>
  </mat-menu>
}
