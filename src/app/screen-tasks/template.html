<section class='tasks'>
    <mat-toolbar>
        <h1>{{state$|async|taskState}}</h1>
    </mat-toolbar>
    <button (click)='addTask()' mat-fab color='accent'>
        <mat-icon>add</mat-icon>
    </button>
    <ng-scrollbar *ngIf='(tasks$|async) as tasks'>
        <cdk-virtual-scroll-viewport itemSize='48' scrollViewport>
            <mat-nav-list>
                <mat-list-item *cdkVirtualFor='let task of tasks; trackBy taskId'>
                    <a
                        matLine
                        [routerLink]='[task.id]'
                        routerLinkActive='nav-link-active'
                        [routerLinkActiveOptions]="{__change_detection_hack__: tasks }"
                        class='task-link'
                    >
                        <mat-icon>{{task|taskStateIcon}}</mat-icon>
                        <span>{{task.name}}</span>
                        <span class='duration'>{{task|taskDuration|async|formatDuration}}</span>
                    </a>
                    <button-task-actions [task]='task'></button-task-actions>
                </mat-list-item>
            </mat-nav-list>
        </cdk-virtual-scroll-viewport>
    </ng-scrollbar>
</section>
<section class="task" *ngIf='taskOpened$|async'>
    <router-outlet></router-outlet>
</section>